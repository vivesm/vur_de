<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vur-De - YouTube Downloader</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="app-container">
        <!-- Title Bar -->
        <div class="title-bar">
            <div class="title"></div>
            <div class="title-bar-controls">
                <button class="theme-toggle" onclick="toggleTheme()" aria-label="Toggle theme">
                    <svg class="sun-icon" width="16" height="16" viewBox="0 0 16 16" fill="none">
                        <circle cx="8" cy="8" r="3" stroke="currentColor" stroke-width="1.5"/>
                        <path d="M8 1V2.5M8 13.5V15M15 8H13.5M2.5 8H1M12.7 12.7L11.5 11.5M4.5 4.5L3.3 3.3M12.7 3.3L11.5 4.5M4.5 11.5L3.3 12.7" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                    </svg>
                    <svg class="moon-icon" width="16" height="16" viewBox="0 0 16 16" fill="none" style="display: none;">
                        <path d="M13.5 8.5C13.5 11.5376 11.0376 14 8 14C6.5 14 5.14903 13.3625 4.18182 12.3409C3.43248 11.5516 3 10.5 3 9.3C3 6.26243 5.46243 3.8 8.5 3.8C8.66667 3.8 8.83108 3.80887 8.99264 3.82633C6.91667 4.20833 5.5 6.07692 5.5 8.5C5.5 11.2614 7.73858 13.5 10.5 13.5C11.8462 13.5 13.0417 12.8333 13.7737 11.8007C13.6342 12.9124 13.1256 13.907 12.3636 14.6591C13.0833 13.7917 13.5 12.6923 13.5 11.5V8.5Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </button>
                <button class="queue-toggle" onclick="toggleQueueSidebar()" aria-label="Toggle queue">
                    <span class="queue-badge" id="queue-badge" style="display: none;">0</span>
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                        <rect x="2" y="3" width="12" height="2" rx="1" stroke="currentColor" stroke-width="1.5"/>
                        <rect x="2" y="7" width="12" height="2" rx="1" stroke="currentColor" stroke-width="1.5"/>
                        <rect x="2" y="11" width="12" height="2" rx="1" stroke="currentColor" stroke-width="1.5"/>
                    </svg>
                </button>
                <button class="settings-toggle" onclick="openSettings()" aria-label="Open settings">
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                        <path d="M8 10C9.10457 10 10 9.10457 10 8C10 6.89543 9.10457 6 8 6C6.89543 6 6 6.89543 6 8C6 9.10457 6.89543 10 8 10Z" stroke="currentColor" stroke-width="1.5"/>
                        <path d="M12.4 10C12.2583 10.3194 12.1833 10.6611 12.1833 11.0167C12.1833 11.8417 12.675 12.5583 13.3833 12.8667L13.5 12.9167V13.0833L13.3833 13.1333C12.675 13.4417 12.1833 14.1583 12.1833 14.9833C12.1833 15.3389 12.2583 15.6806 12.4 16L12.45 16.0833L12.3333 16.1333C11.7611 16.4 11.0944 16.4 10.5222 16.1333L10.4 16.0833L10.45 16C10.5917 15.6806 10.6667 15.3389 10.6667 14.9833C10.6667 14.1583 10.175 13.4417 9.46667 13.1333L9.35 13.0833V12.9167L9.46667 12.8667C10.175 12.5583 10.6667 11.8417 10.6667 11.0167C10.6667 10.6611 10.5917 10.3194 10.45 10L10.4 9.91667L10.5222 9.86667C11.0944 9.6 11.7611 9.6 12.3333 9.86667L12.45 9.91667L12.4 10Z" stroke="currentColor" stroke-width="1.5"/>
                    </svg>
                </button>
            </div>
        </div>

        <!-- Queue Sidebar -->
        <div id="queue-sidebar" class="queue-sidebar">
            <div class="queue-header">
                <h2>Download Queue</h2>
                <button class="queue-close-btn" onclick="toggleQueueSidebar()">
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                        <path d="M12 4L4 12M4 4L12 12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                </button>
            </div>
            
            <div class="queue-content">
                <!-- Active Downloads -->
                <div class="queue-section">
                    <h3 class="queue-section-title">
                        <svg width="14" height="14" viewBox="0 0 14 14" fill="none">
                            <circle cx="7" cy="7" r="5" stroke="currentColor" stroke-width="1.5"/>
                            <path d="M7 3V7L9 9" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                        </svg>
                        Active Downloads (<span id="active-count">0</span>)
                    </h3>
                    <div id="active-downloads" class="queue-items"></div>
                </div>

                <template id="queue-item-template">
                    <div class="queue-item" id="queue-item-{id}">
                        <div class="queue-item-header">
                            <div class="queue-item-title">{title}</div>
                            <div class="queue-item-actions">
                                <button class="queue-item-btn cancel" onclick="cancelDownload('{id}')">
                                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                                        <path d="M12 4L4 12M4 4L12 12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                    </svg>
                                </button>
                            </div>
                        </div>
                        <div class="queue-item-progress">
                            <div class="queue-progress-bar">
                                <div class="queue-progress-fill" style="width: {progress}%;"></div>
                            </div>
                            <div class="queue-progress-text">{progress}%</div>
                        </div>
                    </div>
                </template>
                
                <!-- Pending Downloads -->
                <div class="queue-section">
                    <h3 class="queue-section-title">
                        <svg width="14" height="14" viewBox="0 0 14 14" fill="none">
                            <circle cx="7" cy="7" r="5" stroke="currentColor" stroke-width="1.5" opacity="0.5"/>
                            <circle cx="7" cy="4" r="0.5" fill="currentColor"/>
                            <circle cx="7" cy="10" r="0.5" fill="currentColor"/>
                        </svg>
                        Pending (<span id="pending-count">0</span>)
                    </h3>
                    <div id="pending-downloads" class="queue-items"></div>
                </div>
                
                <!-- Completed Downloads -->
                <div class="queue-section">
                    <h3 class="queue-section-title">
                        <svg width="14" height="14" viewBox="0 0 14 14" fill="none">
                            <circle cx="7" cy="7" r="5" stroke="currentColor" stroke-width="1.5"/>
                            <path d="M4 7L6 9L10 5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        Completed (<span id="completed-count">0</span>)
                    </h3>
                    <div id="completed-downloads" class="queue-items"></div>
                </div>
            </div>
            
            <div class="queue-footer">
                <button class="queue-action-btn" onclick="showHistory()">
                    <svg width="14" height="14" viewBox="0 0 14 14" fill="none">
                        <path d="M7 2V7L9.5 9.5M12 7C12 9.76142 9.76142 12 7 12C4.23858 12 2 9.76142 2 7C2 4.23858 4.23858 2 7 2C9.76142 2 12 4.23858 12 7Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                    </svg>
                    View History
                </button>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <div class="logo-section">
                <div class="logo">
                    <svg width="40" height="40" viewBox="0 0 40 40" fill="none">
                        <rect width="40" height="40" rx="8" fill="url(#logo-gradient)"/>
                        <path d="M16 14V26L26 20L16 14Z" fill="white"/>
                        <defs>
                            <linearGradient id="logo-gradient" x1="0" y1="0" x2="40" y2="40" gradientUnits="userSpaceOnUse">
                                <stop stop-color="#FF0000"/>
                                <stop offset="1" stop-color="#FF4500"/>
                            </linearGradient>
                        </defs>
                    </svg>
                    <h1>Vur-De</h1>
                </div>
                <p class="tagline">Download YouTube videos & music locally</p>
            </div>

            <div class="download-card">
                <div class="url-input-group">
                    <input 
                        type="text" 
                        id="url-input" 
                        placeholder="Paste YouTube URL here..."
                        class="url-input"
                    >
                    <button class="clear-btn" id="clear-btn" onclick="clearInput()" style="display: none;">
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                            <path d="M12 4L4 12M4 4L12 12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                    </button>
                    <button class="paste-btn" onclick="pasteFromClipboard()">
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                            <path d="M10.5 1.5H12.5C13.0523 1.5 13.5 1.94772 13.5 2.5V13.5C13.5 14.0523 13.0523 14.5 12.5 14.5H3.5C2.94772 14.5 2.5 14.0523 2.5 13.5V2.5C2.5 1.94772 2.94772 1.5 3.5 1.5H5.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                            <rect x="5.5" y="0.5" width="5" height="3" rx="1" stroke="currentColor" stroke-width="1.5"/>
                        </svg>
                        Paste
                    </button>
                </div>

                <div class="format-selector">
                    <button class="format-btn active" data-format="audio" onclick="selectFormat('audio')">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <path d="M13 2L7 6H3V14H7L13 18V2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M16.5 7.5C17.1667 8.16667 17.5 9.08333 17.5 10C17.5 10.9167 17.1667 11.8333 16.5 12.5" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        <span>Audio (MP3)</span>
                    </button>
                    <button class="format-btn" data-format="video" onclick="selectFormat('video')">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <rect x="2" y="3" width="16" height="14" rx="2" stroke="currentColor" stroke-width="2"/>
                            <path d="M8 7V13L13 10L8 7Z" fill="currentColor"/>
                        </svg>
                        <span>Video (MP4)</span>
                    </button>
                </div>

                <div class="playlist-options" id="playlist-options" style="display: none;">
                    <div class="playlist-controls">
                        <div class="playlist-limit-group">
                            <label for="playlist-limit">Playlist Limit</label>
                            <input type="number" id="playlist-limit" placeholder="Download all" min="1">
                        </div>
                        <div class="playlist-shuffle-group">
                            <input type="checkbox" id="playlist-shuffle">
                            <label for="playlist-shuffle">Shuffle</label>
                        </div>
                    </div>
                </div>

                <!-- Preview Section -->
                <div id="preview-section" class="preview-section" style="display: none;">
                    <div id="preview-loading" class="preview-loading">
                        <div class="spinner"></div>
                        <p>Getting video info...</p>
                    </div>
                    <div id="preview-content" class="preview-content"></div>
                </div>

                <button class="download-btn" id="download-btn" onclick="startDownload()">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                        <path d="M10 2V14M10 14L6 10M10 14L14 10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M2 14V17C2 17.5523 2.44772 18 3 18H18C17.4477 18 18 17.5523 18 17V14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                    <span>Download</span>
                </button>

                <!-- Error Message -->
                <div id="error-message" class="error-message" style="display: none;">
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                        <circle cx="8" cy="8" r="7" stroke="currentColor" stroke-width="1.5"/>
                        <path d="M8 5V9M8 11H8.01" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                    </svg>
                    <span id="error-text"></span>
                </div>

                <!-- Download Progress -->
                <div id="progress-section" class="progress-section" style="display: none;">
                    <div class="progress-header">
                        <h3 id="progress-title">Downloading...</h3>
                        <button class="cancel-btn" onclick="cancelCurrentDownload()">Cancel</button>
                    </div>
                    <div class="progress-bar">
                        <div id="progress-fill" class="progress-fill"></div>
                    </div>
                    <div class="progress-info">
                        <span id="progress-percent">0%</span>
                        <span id="progress-speed">-</span>
                        <span id="progress-eta">-</span>
                    </div>
                    <div id="progress-details" class="progress-details"></div>
                </div>

                <!-- Settings -->
                <div class="settings-footer">
                    <button class="settings-btn" onclick="openSettings()">
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                            <path d="M8 10C9.10457 10 10 9.10457 10 8C10 6.89543 9.10457 6 8 6C6.89543 6 6 6.89543 6 8C6 9.10457 6.89543 10 8 10Z" stroke="currentColor" stroke-width="1.5"/>
                            <path d="M12.4 10C12.2583 10.3194 12.1833 10.6611 12.1833 11.0167C12.1833 11.8417 12.675 12.5583 13.3833 12.8667L13.5 12.9167V13.0833L13.3833 13.1333C12.675 13.4417 12.1833 14.1583 12.1833 14.9833C12.1833 15.3389 12.2583 15.6806 12.4 16L12.45 16.0833L12.3333 16.1333C11.7611 16.4 11.0944 16.4 10.5222 16.1333L10.4 16.0833L10.45 16C10.5917 15.6806 10.6667 15.3389 10.6667 14.9833C10.6667 14.1583 10.175 13.4417 9.46667 13.1333L9.35 13.0833V12.9167L9.46667 12.8667C10.175 12.5583 10.6667 11.8417 10.6667 11.0167C10.6667 10.6611 10.5917 10.3194 10.45 10L10.4 9.91667L10.5222 9.86667C11.0944 9.6 11.7611 9.6 12.3333 9.86667L12.45 9.91667L12.4 10Z" stroke="currentColor" stroke-width="1.5"/>
                        </svg>
                        Settings
                    </button>
                    <button class="folder-btn" onclick="openDownloadFolder()">
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                            <path d="M2 4.5C2 3.67157 2.67157 3 3.5 3H6.5L8 5H12.5C13.3284 5 14 5.67157 14 6.5V11.5C14 12.3284 13.3284 13 12.5 13H3.5C2.67157 13 2 12.3284 2 11.5V4.5Z" stroke="currentColor" stroke-width="1.5"/>
                        </svg>
                        Open Downloads
                    </button>
                </div>
            </div>
        </div>
            </div>
        </div>

        <!-- Settings Modal -->
        <div id="settings-modal" class="modal" style="display: none;">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>Settings</h2>
                    <button class="modal-close" onclick="closeSettings()">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <path d="M15 5L5 15M5 5L15 15" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="setting-group">
                        <label>Download Location</label>
                        <div class="path-selector">
                            <input type="text" id="download-path" readonly>
                            <button onclick="chooseDirectory()">Choose</button>
                        </div>
                    </div>
                    <div class="setting-group">
                        <label>Audio Quality</label>
                        <select id="audio-quality">
                            <option value="128">128 kbps</option>
                            <option value="192">192 kbps</option>
                            <option value="256">256 kbps</option>
                            <option value="320">320 kbps</option>
                        </select>
                    </div>
                    <div class="setting-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="keep-window-on-top">
                            Keep window on top
                        </label>
                    </div>
                    <div class="setting-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="start-minimized">
                            Start minimized to tray
                        </label>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn secondary" onclick="closeSettings()">Cancel</button>
                    <button class="btn primary" onclick="saveSettings()">Save</button>
                </div>
            </div>
        </div>

        <!-- History Modal -->
        <div id="history-modal" class="modal" style="display: none;">
            <div class="modal-content modal-large">
                <div class="modal-header">
                    <h2>Download History</h2>
                    <button class="modal-close" onclick="closeHistory()">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <path d="M15 5L5 15M5 5L15 15" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                    </button>
                </div>
                <div class="modal-body">
                    <div id="history-list" class="history-list">
                        <!-- History items will be populated here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="renderer.js"></script>
</body>
</html>